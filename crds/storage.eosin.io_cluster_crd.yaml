apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: clusters.storage.eosin.io
spec:
  group: storage.eosin.io
  names:
    categories: []
    kind: Cluster
    plural: clusters
    shortNames: []
    singular: cluster
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.phase
      name: PHASE
      type: string
    - jsonPath: .status.lastUpdated
      name: AGE
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for ClusterSpec via `CustomResource`
        properties:
          spec:
            properties:
              extra_labels:
                additionalProperties:
                  type: string
                default: {}
                description: Optional additional labels applied to all child resources.
                type: object
              grpc_port:
                default: 50051
                description: gRPC port exposed by shard replicas.
                format: uint16
                maximum: 65535.0
                minimum: 0.0
                type: integer
              image:
                description: Container image for shard replicas.
                type: string
              placement:
                default:
                  node_selector: null
                  tolerations: null
                  topology_key: null
                description: Placement hints (anti-affinity, zones, etc.)
                properties:
                  node_selector:
                    additionalProperties:
                      type: string
                    description: 'Hard requirement: node selector.'
                    nullable: true
                    type: object
                  tolerations:
                    additionalProperties:
                      type: string
                    description: Node taint tolerations.
                    nullable: true
                    type: object
                  topology_key:
                    description: 'Soft preference: topology spread key, etc.'
                    nullable: true
                    type: string
                type: object
              resources:
                default:
                  cpu: null
                  memory: null
                  storage: null
                description: Default resources per replica.
                properties:
                  cpu:
                    description: e.g. "500m"
                    nullable: true
                    type: string
                  memory:
                    description: e.g. "1Gi"
                    nullable: true
                    type: string
                  storage:
                    description: e.g. "10Gi"
                    nullable: true
                    type: string
                type: object
              storage_class_name:
                description: ClusterClass for the underlying volumes (if using StatefulSets/PVCs).
                nullable: true
                type: string
              topology:
                description: Shard + replica layout.
                properties:
                  read_replicas:
                    description: Number of read replicas per shard.
                    format: uint32
                    minimum: 0.0
                    type: integer
                  shards:
                    description: Number of logical shards.
                    format: uint32
                    minimum: 0.0
                    type: integer
                required:
                - read_replicas
                - shards
                type: object
            required:
            - image
            - topology
            type: object
          status:
            description: Status object for the [`Cluster`] resource.
            nullable: true
            properties:
              conditions:
                default: []
                description: Standard Kubernetes conditions (Available, Progressing, Degradedâ€¦)
                items:
                  description: Condition contains details for one aspect of the current state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition transitioned from one status to another. This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating details about the transition. This may be an empty string.
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation that the condition was set based upon. For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date with respect to the current state of the instance.
                      format: int64
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating the reason for the condition's last transition. Producers of specific condition types may define expected values and meanings for this field, and whether the values are considered a guaranteed API. The value should be a CamelCase string. This field may not be empty.
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              lastUpdated:
                description: Timestamp of when the [`ClusterStatus`] object was last updated.
                format: date-time
                nullable: true
                type: string
              message:
                description: |-
                  A human-readable message indicating details about why the
                  [`Cluster`] is in this phase.
                nullable: true
                type: string
              phase:
                description: A short description of the [`Cluster`] resource's current state.
                enum:
                - Pending
                - Reconciling
                - Ready
                - Degraded
                - Error
                type: string
            required:
            - phase
            type: object
        required:
        - spec
        title: Cluster
        type: object
    served: true
    storage: true
    subresources:
      status: {}
